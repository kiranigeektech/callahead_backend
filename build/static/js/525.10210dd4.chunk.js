"use strict";(self.webpackChunktruck_tracking=self.webpackChunktruck_tracking||[]).push([[525],{2525:function(e,t,a){a.r(t),a.d(t,{default:function(){return P}});var n=a(1413),s=a(885),l=a(2791),i=a(4270),r=a(6157),c=a(3855),d=a(6871),o=a(5543),u=a(4834),h=a(5159),x=a(184),v=function(e){var t=e.openModal,a=e.handleClose,n=e.handleDeleteFun;return(0,x.jsx)("div",{children:(0,x.jsxs)(h.Z,{show:t,onHide:a,children:[(0,x.jsx)(h.Z.Header,{closeButton:!0,children:(0,x.jsx)(h.Z.Title,{children:"Delete Driver"})}),(0,x.jsx)(h.Z.Body,{children:(0,x.jsx)("p",{children:"Are you sure want to delete this driver?"})}),(0,x.jsxs)(h.Z.Footer,{children:[(0,x.jsx)(r.Z,{onClick:a,variant:"secondary",children:"Close"}),(0,x.jsx)(r.Z,{className:"DriverDashboard__content__nav--btn",variant:"primary",onClick:n,children:"Delete"})]})]})})},m=a(577),j=a(4849),f=function(e){var t=e.driverListData,a=e.isLoading,n=e.switchData,i=(0,d.s0)(),r=(0,l.useState)([]),c=(0,s.Z)(r,2),h=c[0],f=c[1],g=(0,l.useState)(!1),b=(0,s.Z)(g,2),p=b[0],_=b[1],N=(0,l.useState)(null),D=(0,s.Z)(N,2),Z=D[0],k=D[1];(0,l.useEffect)((function(){t&&f(t)}),[t]);return(0,x.jsxs)(l.Fragment,{children:[a?(0,x.jsx)("div",{className:"spinner",children:(0,x.jsx)(j.Z,{animation:"border"})}):(0,x.jsxs)("table",{className:"custome_table",children:[(0,x.jsx)("thead",{children:(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{className:"custome_table--th",children:"Name"}),(0,x.jsx)("th",{className:"custome_table--th",children:"Route"}),(0,x.jsx)("th",{className:"custome_table--th",children:"County"}),(0,x.jsx)("th",{className:"custome_table--th",children:"Truck"}),(0,x.jsx)("th",{className:"custome_table--th",children:"MB"}),(0,x.jsx)("th",{className:"custome_table--th",children:"Notes"}),(0,x.jsx)("th",{className:"custome_table--th",children:"Phone"}),(0,x.jsx)("th",{className:"custome_table--th",children:"Action"})]})}),(0,x.jsx)("tbody",{children:h?h.map((function(e,t){return(0,x.jsx)(l.Fragment,{children:(0,x.jsxs)("tr",{className:"custome_table--tr",children:[(0,x.jsx)("td",{className:"custome_table--td",children:e.NAME}),(0,x.jsx)("td",{className:"custome_table--td",children:e.ROUTE}),(0,x.jsx)("td",{className:"custome_table--td",children:e.COUNTY}),(0,x.jsx)("td",{className:"custome_table--td",children:e.TRUCK}),(0,x.jsx)("td",{className:"custome_table--td",children:e.MB}),(0,x.jsx)("td",{className:"custome_table--td",children:e.NOTES}),(0,x.jsx)("td",{className:"custome_table--td",children:e.PHONE}),(0,x.jsx)("td",{className:"custome_table--td",children:(0,x.jsxs)("div",{className:"Driver-action",children:[(0,x.jsx)("div",{className:"Driver-action".concat(e.ROUTE&&e.ROUTE_DAY?"--tracking_active":"--tracking_inactive"),onClick:function(){!function(e){if(e.ROUTE&&e.ROUTE_DAY){var t=Object.assign({},e),a=JSON.stringify(t);localStorage.setItem("driver_data",a),i("/dashboard/driver/track")}}(e)},children:(0,x.jsx)(u.nH,{})}),(0,x.jsx)("div",{className:"Driver-action--pensil",children:(0,x.jsx)(u._5,{onClick:function(){!function(e){var t=Object.assign({},e);t.is_friday_drivers=n;var a=JSON.stringify(t);localStorage.setItem("edit_user",a),i("/dashboard/driver/edit")}(e)}})}),(0,x.jsx)("div",{className:"Driver-action--delete",children:(0,x.jsx)(u.pJ,{onClick:function(){_(!0),k(e.ID)}})})]})})]})},t)})):null})]}),p&&(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(v,{openModal:p,handleClose:function(){_(!1),k(null)},handleDeleteFun:function(){if(Z){var e={id:Z},t=localStorage.getItem("auth");(0,o.go)(JSON.parse(t),e,n).then((function(e){if(console.log(e),e.data.success){var t=Array.from(h).filter((function(e){return e.ID!==Z}));f(t),_(!1),k(null),m.Am.success("Driver suceessfully deleted!")}})).catch((function(e){console.log(e)}))}}})})]})},g=a(8979),b=a(4942),p=a(1146),_=l.forwardRef((function(e,t){var a=e.fieldsTitles,n=e.Pagetitle,i=e.Showdate,r=e.Showday,c=e.dataToShow,d=void 0===c?[]:c,o=l.useState(),u=(0,s.Z)(o,2),h=u[0],v=u[1],m=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][(new Date).getDay()];return l.useEffect((function(){if(i){var e=function(){var e=new Date,t=""+(e.getMonth()+1),a=""+e.getDate(),n=e.getFullYear();return t.length<2&&(t="0"+t),a.length<2&&(a="0"+a),[t,a,n].join("/")}();v(e)}}),[]),(0,x.jsxs)("div",{ref:t,className:"p-2 w-100",children:[(0,x.jsx)("div",{className:"d-flex justify-content-end w-100",children:(0,x.jsx)("p",{className:"small_text"})}),(0,x.jsx)("div",{className:"d-flex justify-content-center w-100 mt-4 mb-3",children:(0,x.jsx)("img",{src:"../../assets/image/logo-large-callahead.png",height:60,style:{marginTop:"-20px"},alt:"collahead_logo"})}),(0,x.jsxs)("div",{className:"PageTitle",children:[(0,x.jsx)("div",{children:n.pagetitle}),(0,x.jsx)("div",{style:{marginLeft:"15px"},children:i?h:""}),(0,x.jsx)("div",{style:{marginLeft:"15px"},children:r?m:""})]}),(0,x.jsxs)("table",{className:"w-100",children:[(0,x.jsx)("thead",{children:(0,x.jsx)("tr",{style:{borderBottom:"2px solid black"},children:a.map((function(e,t){return(0,x.jsx)("th",{className:"custome_table--th",style:{color:"black"},children:e.title},t)}))})}),(0,x.jsx)("tbody",{children:d.map((function(e,t){return(0,x.jsx)(l.Fragment,{children:(0,x.jsx)("tr",{className:"custome_table--tr",style:{borderBottom:"0.5px solid black"},children:a.map((function(t,a){return(0,x.jsx)("td",{className:"custome_table--td p-2",children:(0,x.jsx)("small",{children:e[t.value]})},a)}))})},t)}))})]})]})})),N=a(9743),D=a(2677),Z=function(e){return(0,x.jsxs)(h.Z,(0,n.Z)((0,n.Z)({},e),{},{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,x.jsx)(h.Z.Header,{closeButton:!0,children:(0,x.jsx)(h.Z.Title,{id:"contained-modal-title-vcenter",children:e.title})}),(0,x.jsx)(h.Z.Body,{children:e.children}),(0,x.jsxs)(h.Z.Footer,{children:[(0,x.jsx)(r.Z,{variant:"danger",onClick:e.onHide,children:"Close"}),(0,x.jsx)(r.Z,{onClick:e.onSubmit,children:e.submittext?e.submittext:"Save"})]})]}))},k=function(e){var t=e.dataToShow,a=void 0===t?[]:t,i=[{title:"Code",value:"ID",include:!0},{title:"Name",value:"NAME",include:!0},{title:"Route",value:"ROUTE",include:!0},{title:"County",value:"COUNTY",include:!0},{title:"Truck",value:"TRUCK",include:!0},{title:"MB",value:"MB",include:!0},{title:"Notes",value:"NOTES",include:!0},{title:"Phone",value:"PHONE",include:!0}],d=l.useRef(null),o=l.useState(i),u=(0,s.Z)(o,2),h=u[0],v=u[1],m=l.useState({pagetitle:"PUMP DRIVER LOG "}),f=(0,s.Z)(m,2),g=f[0],k=f[1],P=l.useState(!0),S=(0,s.Z)(P,2),C=S[0],y=S[1],T=l.useState(!0),w=(0,s.Z)(T,2),O=w[0],E=w[1],R=l.useRef(null),M=l.useState(!1),A=(0,s.Z)(M,2),B=A[0],I=A[1],U=l.useState(!1),F=(0,s.Z)(U,2),L=F[0],H=F[1],J=l.useState("old boring text"),Y=(0,s.Z)(J,2),G=Y[0],z=Y[1],K=l.useCallback((function(){console.log("`onAfterPrint` called")}),[]),V=l.useCallback((function(){X(),console.log("`onBeforePrint` called")}),[]),q=l.useCallback((function(){return console.log("`onBeforeGetContent` called"),H(!0),z("Loading new text..."),new Promise((function(e){R.current=e,setTimeout((function(){H(!1),z("New, Updated Text!"),e()}),2e3)}))}),[H,z]),W=l.useCallback((function(){return d.current}),[d.current]),Q=(0,p.useReactToPrint)({content:W,documentTitle:"Truck Tracking | Dashboard | Driver",onBeforeGetContent:q,onBeforePrint:V,onAfterPrint:K,removeAfterPrint:!0});l.useEffect((function(){"New, Updated Text!"===G&&"function"===typeof R.current&&R.current()}),[R.current,G]);var X=function(){v(i),I(!1),k({pagetitle:"PUMP DRIVER LOG "})};return(0,x.jsxs)("div",{children:[(0,x.jsx)(r.Z,{className:"DriverDashboard__content__nav--btn",onClick:function(){I(!0)},children:"Print"}),(0,x.jsx)(Z,{title:"Print Drivers",submittext:L?(0,x.jsx)("div",{className:"px-3",children:(0,x.jsx)(j.Z,{animation:"border",size:"sm"})}):(0,x.jsx)("div",{className:"px-2",children:"Print"}),show:B,onSubmit:Q,onHide:X,children:(0,x.jsx)(c.Z,{children:(0,x.jsxs)(N.Z,{children:[(0,x.jsx)(N.Z,{children:(0,x.jsxs)("div",{className:"MainTitleField",children:[(0,x.jsx)("div",{className:"Printdriver",children:(0,x.jsx)("div",{className:"Printdriver__input",children:(0,x.jsx)(c.Z.Control,{type:"text",onChange:function(e){k((0,n.Z)((0,n.Z)({},g),{},(0,b.Z)({},e.target.name,e.target.value)))},name:"pagetitle",placeholder:"Enter Title",value:g.pagetitle})})}),(0,x.jsxs)("div",{className:"Printdriver__Checkbox",children:[(0,x.jsx)("div",{className:"Printdriver__Checkbox--checkbx",children:(0,x.jsx)(c.Z.Check,{defaultChecked:!0,label:"Date",onChange:function(){y(!C)}})}),(0,x.jsx)("div",{className:"Printdriver__Checkbox--checkbx",children:(0,x.jsx)(c.Z.Check,{defaultChecked:!0,label:"Day",onChange:function(){E(!O)}})})]})]})}),(0,x.jsx)("div",{className:"ModelTitle"}),h.map((function(e,t){return(0,x.jsx)(D.Z,{md:6,children:(0,x.jsx)("div",{className:"mb-3",children:(0,x.jsx)(c.Z.Check,{type:"checkbox",id:e.title,defaultChecked:e.include,value:e.include,name:e.value,label:e.title,onChange:function(e){!function(e,t){var a=h;a[t]=(0,n.Z)((0,n.Z)({},a[t]),{},{include:e.target.checked}),console.log("==>",a),v(a)}(e,t)}})},"default-checkbox")},t)}))]})})}),(0,x.jsx)("div",{hidden:!0,children:(0,x.jsx)(_,{ref:d,fieldsTitles:h.filter((function(e){return e.include})),dataToShow:a,Pagetitle:g,Showdate:C,Showday:O})})]})},P=function(){var e=(0,d.s0)(),t=(0,l.useState)([]),a=(0,s.Z)(t,2),u=a[0],h=a[1],v=(0,l.useState)(!1),m=(0,s.Z)(v,2),j=m[0],b=m[1],p=(0,l.useState)(null),_=(0,s.Z)(p,2),N=_[0],D=_[1],Z=(0,l.useState)(""),P=(0,s.Z)(Z,2),S=(P[0],P[1]),C=(0,l.useState)({page:1,perPage:10}),y=(0,s.Z)(C,2),T=y[0],w=y[1],O=(0,l.useState)("true"==localStorage.getItem("switchData")),E=(0,s.Z)(O,2),R=E[0],M=E[1],A=(0,l.useState)("Drivers (Mon-Thurs)"),B=(0,s.Z)(A,2),I=B[0],U=B[1];l.useEffect((function(){var e=localStorage.getItem("auth");M("true"==localStorage.getItem("switchData")),S(JSON.parse(e))}),[]),l.useEffect((function(){U(R?"Drivers - Friday":"Drivers ( Mon-Thurs )")}),[R]);l.useEffect((function(){!function(){var e=localStorage.getItem("auth");b(!0),R?(0,o.ox)(JSON.parse(e),T.page,T.perPage).then((function(e){if(e.data.success){var t=Array.from(e.data.data.data);b(!1),h(t),D({page:e.data.data.page,perPage:e.data.data.perPage,totalPages:e.data.data.totalPages})}})).catch((function(e){console.log(e)})):(0,o.Ph)(JSON.parse(e),T.page,T.perPage).then((function(e){if(e.data.success){var t=Array.from(e.data.data.data);b(!1),h(t),D({page:e.data.data.page,perPage:e.data.data.perPage,totalPages:e.data.data.totalPages})}})).catch((function(e){console.log(e)}))}()}),[T,R]);var F=function(e){"next"===e?T.page<N.totalPages&&w((0,n.Z)((0,n.Z)({},T),{},{page:T.page+1})):T.page>1&&w((0,n.Z)((0,n.Z)({},T),{},{page:T.page-1}))};return(0,x.jsxs)(l.Fragment,{children:[(0,x.jsx)(i.q,{children:(0,x.jsx)("title",{children:"Truck Tracking | Dashboard | Driver"})}),(0,x.jsx)(g.Z,{children:(0,x.jsxs)("div",{className:"DriverDashboard__content",children:[(0,x.jsxs)("div",{className:"DriverDashboard__content__nav",children:[(0,x.jsxs)("div",{className:"DriverDashboard__content__nav--text",style:{display:"flex"},children:[(0,x.jsx)("p",{className:"p",children:I}),(0,x.jsxs)("label",{class:"switch ",children:[(0,x.jsx)("input",{type:"checkbox",checked:R,onClick:function(){return localStorage.setItem("switchData",!R),void M(!R)}}),(0,x.jsx)("span",{class:"slider round"})]})]}),(0,x.jsxs)("div",{className:"d-flex",children:[(0,x.jsx)(k,{dataToShow:u}),(0,x.jsx)(r.Z,{onClick:function(){e("/dashboard/driver/add")},className:"DriverDashboard__content__nav--btn",children:"+ Add"})]})]}),(0,x.jsxs)("div",{className:"",children:[(0,x.jsx)(f,{driverListData:u,isLoading:j,switchData:R}),(null===N||void 0===N?void 0:N.totalPages)&&(0,x.jsxs)("div",{className:"DriverDashboard__Pagination alignItemsCenter",children:[(0,x.jsx)("div",{children:(0,x.jsxs)(c.Z.Select,{"aria-label":"Default select example",value:T.perPage,onChange:function(e){var t=e.target.value;w({page:1,perPage:t})},children:[(0,x.jsx)("option",{value:"5",children:"5"}),(0,x.jsx)("option",{value:"10",children:"10"}),(0,x.jsx)("option",{value:"25",children:"25"}),(0,x.jsx)("option",{value:"50",children:"50"}),(0,x.jsx)("option",{value:"all",children:"All"})]})}),(0,x.jsxs)("div",{className:"DriverDashboard__Pagination--content",children:[(0,x.jsx)("div",{children:(0,x.jsx)(r.Z,{onClick:function(){F("prev")},className:"DriverDashboard__Pagination--prev DriverDashboard__content__nav--btn",children:"< Prev"})}),(0,x.jsxs)("div",{children:[T.page," out ",N.totalPages||0," "]}),(0,x.jsx)("div",{children:(0,x.jsx)(r.Z,{onClick:function(){F("next")},className:"DriverDashboard__Pagination--next DriverDashboard__content__nav--btn",children:"Next >"})})]})]})]})]})})]})}}}]);
//# sourceMappingURL=525.10210dd4.chunk.js.map